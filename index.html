<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nigeria Scam Allegations Companies Database</title>
  <style>
    /* Global Styles */
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      margin: 0;
      padding: 20px;
      color: #333;
      line-height: 1.5;
    }

    .container {
      background: white;
      max-width: 800px;
      margin: 0 auto;
      padding: 25px 30px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    h1 {
      color: #d32f2f;
      font-weight: 700;
      margin-bottom: 10px;
      text-align: center;
    }

    /* Purpose / Mission Section */
    #mission {
      background: #fff4e5;
      border: 1px solid #ffd89b;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 25px;
      font-size: 1.1rem;
      color: #6a4a00;
    }

    /* Search Input */
    #searchBox {
      width: 100%;
      padding: 12px 15px;
      font-size: 16px;
      border: 1.5px solid #ccc;
      border-radius: 8px;
      margin-bottom: 15px;
      box-sizing: border-box;
      transition: border-color 0.3s ease;
    }
    #searchBox:focus {
      border-color: #d32f2f;
      outline: none;
      box-shadow: 0 0 6px #d32f2f66;
    }

    /* Results List */
    #results {
      list-style: none;
      margin: 0;
      padding: 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      max-height: 220px;
      overflow-y: auto;
      background: #fafafa;
    }
    #results li {
      padding: 12px 15px;
      border-bottom: 1px solid #ddd;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    #results li:hover {
      background-color: #ffe6e6;
    }

    /* PDF Viewer Container */
    #pdfViewerContainer {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: white;
      z-index: 1100;
      overflow-y: auto;
      padding: 30px 30px 90px 30px;
      box-sizing: border-box;
      display: none;
      flex-direction: column;
      align-items: flex-start;
      border-top: 5px solid #d32f2f;
    }
    #pdfViewerContainer.active {
      display: flex;
    }
    #pdfViewerContainer button {
      background: #d32f2f;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 25px;
      margin: 10px 10px 20px 0;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    #pdfViewerContainer button:hover {
      background-color: #a82525;
    }
    #pdfViewerContainer button.green-button {
      background-color: #2e7d32;
    }
    #pdfViewerContainer button.green-button:hover {
      background-color: #1b4d1b;
    }

    /* Upload Form */
    #uploadForm {
      width: 100%;
      max-width: 600px;
      background: #f7f7f7;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      display: none;
      box-sizing: border-box;
    }
    #uploadForm input[type="text"],
    #uploadForm input[type="email"],
    #uploadForm textarea,
    #uploadForm input[type="file"] {
      width: 100%;
      margin: 10px 0;
      padding: 12px;
      font-size: 1rem;
      border: 1.5px solid #ccc;
      border-radius: 6px;
      box-sizing: border-box;
      resize: vertical;
    }
    #uploadForm button[type="submit"] {
      background-color: #2e7d32;
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      margin-top: 10px;
      transition: background-color 0.3s ease;
    }
    #uploadForm button[type="submit"]:hover {
      background-color: #1b4d1b;
    }

    /* Confirmation Message */
    #confirmationMessage {
      max-width: 600px;
      background: #e8f5e9;
      color: #2e7d32;
      font-weight: 700;
      padding: 15px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
      box-sizing: border-box;
    }

    /* Informative Section below */
    section {
      margin-top: 30px;
      background: #fffbea;
      border: 1px solid #f4e5b7;
      border-radius: 8px;
      padding: 20px;
      font-size: 1rem;
      color: #6a4a00;
      line-height: 1.5;
    }
    section a {
      color: #d32f2f;
      font-weight: 700;
      text-decoration: underline;
    }

    /* Footer */
    footer {
      background-color: #f5f5f5;
      padding: 35px 30px;
      margin-top: 40px;
      font-size: 14px;
      color: #333;
      border-top: 1px solid #ddd;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      border-radius: 0 0 10px 10px;
      box-sizing: border-box;
    }
    footer p {
      margin: 6px 0;
    }
    footer a {
      color: #d32f2f;
      text-decoration: underline;
    }
    footer h4 {
      margin-top: 25px;
      font-size: 16px;
      font-weight: 700;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Nigeria Scam Allegations Companies Database</h1>

    <div id="mission" aria-label="Website Mission Statement">
      <p>
        Our mission is to provide a transparent, community-driven platform that establishes and displays live petitions against rogue companies alleged to have defrauded individuals. 
        By sharing verified evidence and petitions here, we help warn the public and promote accountability.
      </p>
    </div>

    <input type="text" id="searchBox" placeholder="Search company... e.g., Sujimoto, PWAN" aria-label="Search company" />
    <ul id="results" aria-live="polite" aria-relevant="additions"></ul>

    <div id="pdfViewerContainer" role="dialog" aria-modal="true" aria-labelledby="pdfViewerTitle">
      <button onclick="closeViewer()" aria-label="Close viewer">Close</button>
      <button class="green-button" onclick="toggleUploadForm()" aria-expanded="false" aria-controls="uploadForm">Submit a New Petition</button>

      <form id="uploadForm" enctype="multipart/form-data" aria-hidden="true">
        <input type="text" name="name" placeholder="Your Full Name" required aria-required="true" />
        <input type="email" name="email" placeholder="Your Email Address" required aria-required="true" />
        <textarea name="details" placeholder="Brief details of how you were scammed..." required aria-required="true"></textarea>
        <input type="file" name="attachments" multiple accept=".pdf,image/*" aria-describedby="fileHelp" />
        <small id="fileHelp" style="color:#666;">Attach any evidence files (PDF or images).</small>
        <input type="hidden" name="company" id="selectedCompany" />
        <button type="submit">Send New Petition</button>
      </form>

      <div id="confirmationMessage" role="alert" aria-live="assertive">
        Thank you for sending your new petition. It will be reviewed and go live within 24 hours to warn others.
      </div>

      <div id="pdfContent" aria-live="polite" style="margin-top: 20px;"></div>
    </div>

    <section>
      <p><strong>Have you been scammed by a Real Estate Company in Lagos?</strong><br />
        Send your evidence of payment to 
        <a href="https://wa.me/2347077513836" target="_blank" rel="noopener noreferrer">ADMIN</a>. A <strong>PETITION</strong> to EFCC will be automatically created for you, and the company name and petition will be made live on this website to <strong>WARN</strong> others.
      </p>

      <p><strong>Does your Company appear on this list?</strong><br />
        To get your company name removed from this database, contact 
        <a href="https://wa.me/2347077513836" target="_blank" rel="noopener noreferrer">ADMIN</a>, providing evidence that you have <strong>SUFFICIENTLY</strong> clarified and paid out the fraudulent allegations against your company. Once the petitioner <strong>CONFIRMS</strong> receipt, your company will be removed from the database within 24 hours.
      </p>
    </section>

  </div>

  <footer>
    <p style="font-weight: bold;">Â© 2025, Nigeria Scam Allegations Petition Platform</p>
    <p><a href="#">Data Privacy Policy</a></p>
    <h4>CONTACT US</h4>
    <p>
      PETITIONS HUB<br />
      Plot 123, Transparency Crescent, Central Business District<br />
      P.M.B: 101, Garki, Abuja<br />
      Phone: +234-812-345-6789<br />
      Mobile/Whatsapp: <a href="https://wa.me/2347077513836" target="_blank" rel="noopener noreferrer">+234 707 751 3836</a><br />
      Email: <a href="mailto:contact@petitionhub.ng">contact@petitionhub.ng</a>
    </p>
  </footer>

  <script>
    const searchBox = document.getElementById("searchBox");
    const resultsList = document.getElementById("results");
    const pdfViewerContainer = document.getElementById("pdfViewerContainer");
    const pdfContent = document.getElementById("pdfContent");
    const uploadForm = document.getElementById("uploadForm");
    const selectedCompanyInput = document.getElementById("selectedCompany");
    const confirmationMessage = document.getElementById("confirmationMessage");
    const uploadToggleBtn = pdfViewerContainer.querySelector("button.green-button");

    let companies = [];

    // Load company data
    fetch('data/companies.json')
      .then(res => res.json())
      .then(data => companies = data)
      .catch(() => {
        companies = [];
        alert("Failed to load company data.");
      });

    // Search companies dynamically
    searchBox.addEventListener('input', () => {
      const query = searchBox.value.trim().toLowerCase();
      resultsList.innerHTML = '';
      if (!query) return;

      const filtered = companies.filter(c => c.name.toLowerCase().includes(query));
      if (filtered.length === 0) {
        const li = document.createElement('li');
        li.textContent = "No companies found";
        li.style.cursor = 'default';
        resultsList.appendChild(li);
        return;
      }

      filtered.forEach(company => {
        const li = document.createElement('li');
        li.textContent = company.name;
        li.tabIndex = 0;
        li.onclick = () => showPetitions(company);
        li.onkeypress = e => { if (e.key === "Enter") showPetitions(company); };
        resultsList.appendChild(li);
      });
    });

    function showPetitions(company) {
      selectedCompanyInput.value = company.name;
      pdfViewerContainer.classList.add("active");
      pdfContent.innerHTML = `<h2 id="pdfViewerTitle">${company.heading}</h2>`;
      if (!company.petitions || company.petitions.length === 0) {
        pdfContent.innerHTML += "<p>No petitions available for this company yet.</p>";
      } else {
        company.petitions.forEach(petition => {
          const p = document.createElement('p');
          p.innerHTML = `<strong>${petition.title}</strong>`;
          const viewBtn = document.createElement('button');
          viewBtn.textContent = "View PDF";
          viewBtn.onclick = () => window.open(petition.file, '_blank');
          const downloadBtn = document.createElement('button');
          downloadBtn.textContent = "Download PDF";
          downloadBtn.onclick = () => {
            const a = document.createElement('a');
            a.href = petition.file;
            a.download = '';
            a.click();
          };
          pdfContent.appendChild(p);
          pdfContent.appendChild(viewBtn);
          pdfContent.appendChild(downloadBtn);
        });
      }
      // Reset upload form and confirmation
      uploadForm.style.display = "none";
      confirmationMessage.style.display = "none";
      uploadToggleBtn.setAttribute('aria-expanded', 'false');
    }

    function closeViewer() {
      pdfViewerContainer.classList.remove("active");
      pdfContent.innerHTML = '';
      uploadForm.style.display = "none";
      confirmationMessage.style.display = "none";
      searchBox.value = "";
      resultsList.innerHTML = "";
      uploadToggleBtn.setAttribute('aria-expanded', 'false');
    }

    function toggleUploadForm() {
      const isHidden = uploadForm.style.display === "none";
      uploadForm.style.display = isHidden ? "block" : "none";
      confirmationMessage.style.display = "none";
      uploadToggleBtn.setAttribute('aria-expanded', isHidden.toString());
    }

    uploadForm.addEventListener('submit', async e => {
      e.preventDefault();
      confirmationMessage.style.display = "none";

      const formData = new FormData(uploadForm);
      try {
        // Simulate upload to backend - replace with real API call
        await new Promise(res => setTimeout(res, 1500));

        uploadForm.reset();
        uploadForm.style.display = "none";
        confirmationMessage.style.display = "block";
        uploadToggleBtn.setAttribute('aria-expanded', 'false');
      } catch (err) {
        alert("Error submitting petition. Please try again.");
      }
    });
  </script>
</body>
</html>
